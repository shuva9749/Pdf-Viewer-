<!DOCTYPE html>
<html>
<head>
  <title>Google Drive Picker</title>
  <meta name="google-signin-client_id" content="705204588232-3m2bivi6c0nd41lgpe7j34abim8s0gta.apps.googleusercontent.com">
  <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
</head>
<body>

<!-- Google Drive Picker Button -->
<button onclick="onApiLoad()">Pick a PDF from Google Drive</button>

<!-- File link display -->
<p id="fileLink"></p>

<script>
  let developerKey = 'AIzaSyAs1-yX51Kd5aKl-mB1oHhKXhOwCUDcPUY';
  let clientId = '705204588232-3m2bivi6c0nd41lgpe7j34abim8s0gta.apps.googleusercontent.com';
  let scope = ['https://www.googleapis.com/auth/drive.readonly'];

  function onApiLoad() {
    gapi.load('auth', { 'callback': onAuthApiLoad });
    gapi.load('picker');
  }

  function onAuthApiLoad() {
    window.gapi.auth.authorize(
      {
        'client_id': clientId,
        'scope': scope,
        'immediate': false
      },
      handleAuthResult
    );
  }

  function handleAuthResult(authResult) {
    if (authResult && !authResult.error) {
      let picker = new google.picker.PickerBuilder()
        .addView(new google.picker.DocsView().setMimeTypes("application/pdf"))
        .setOAuthToken(authResult.access_token)
        .setDeveloperKey(developerKey)
        .setCallback(pickerCallback)
        .build();
      picker.setVisible(true);
    }
  }

  function pickerCallback(data) {
    if (data.action == google.picker.Action.PICKED) {
      let file = data.docs[0];
      document.getElementById('fileLink').innerHTML =
        `<strong>Selected File:</strong> <a href="${file.url}" target="_blank">${file.name}</a>`;
    }
  }
</script>

<!-- Google Picker API Loader -->
<script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/client.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>

</body>
</html>
